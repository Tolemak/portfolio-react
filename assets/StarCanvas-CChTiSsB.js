import{r as a,j as f}from"./index-B7JnfVOx.js";import{a as W,e as N,_ as x,f as q,c as S,g as y,h as L,V as B,u as z,i as $,j as V,C as I,d as H}from"./Gltf-hnr-41As.js";function b(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function E(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)}return e}function P(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?E(Object(e),!0).forEach(function(n){b(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):E(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}new W;new W;function T(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function r(t,e,n){var o=this;T(this,r),b(this,"dot2",function(i,s){return o.x*i+o.y*s}),b(this,"dot3",function(i,s,l){return o.x*i+o.y*s+o.z*l}),this.x=t,this.y=e,this.z=n},K=[new p(1,1,0),new p(-1,1,0),new p(1,-1,0),new p(-1,-1,0),new p(1,0,1),new p(-1,0,1),new p(1,0,-1),new p(-1,0,-1),new p(0,1,1),new p(0,-1,1),new p(0,1,-1),new p(0,-1,-1)],A=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],O=new Array(512),M=new Array(512),Z=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var e=0;e<256;e++){var n;e&1?n=A[e]^t&255:n=A[e]^t>>8&255,O[e]=O[e+256]=n,M[e]=M[e+256]=K[n%12]}};Z(0);function Q(r){if(typeof r=="number")r=Math.abs(r);else if(typeof r=="string"){var t=r;r=0;for(var e=0;e<t.length;e++)r=(r+(e+1)*(t.charCodeAt(e)%96))%2147483647}return r===0&&(r=311),r}function C(r){var t=Q(r);return function(){var e=t*48271%2147483647;return t=e,e/2147483647}}var J=function r(t){var e=this;T(this,r),b(this,"seed",0),b(this,"init",function(n){e.seed=n,e.value=C(n)}),b(this,"value",C(this.seed)),this.init(t)},X=new J(Math.random()),Y={radius:1,center:[0,0,0]};function ee(r,t){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X,n=P(P({},Y),t),o=n.radius,i=n.center,s=0;s<r.length;s+=3){var l=Math.pow(e.value(),.3333333333333333),u=e.value()*2-1,c=e.value()*2-1,m=e.value()*2-1,d=Math.sqrt(u*u+c*c+m*m);u=l*u/d,c=l*c/d,m=l*m/d,r[s]=u*o+i[0],r[s+1]=c*o+i[1],r[s+2]=m*o+i[2]}return r}const te=()=>parseInt(N.replace(/\D+/g,"")),G=te(),k=G>=154?"opaque_fragment":"output_fragment";class re extends q{constructor(t){super(t),this.onBeforeCompile=(e,n)=>{const{isWebGL2:o}=n.capabilities;e.fragmentShader=e.fragmentShader.replace(`#include <${k}>`,`
        ${o?`#include <${k}>`:`#extension GL_OES_standard_derivatives : enable
#include <${k}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${G>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const ae=a.forwardRef((r,t)=>{const[e]=a.useState(()=>new re(null));return a.createElement("primitive",x({},r,{object:e,ref:t,attach:"material"}))});let g,v;const ne=a.createContext(null),_=new L,F=new B,oe=a.forwardRef(({children:r,range:t,limit:e=1e3,...n},o)=>{const i=a.useRef(null);a.useImperativeHandle(o,()=>i.current,[]);const[s,l]=a.useState([]),[[u,c,m]]=a.useState(()=>[new Float32Array(e*3),Float32Array.from({length:e*3},()=>1),Float32Array.from({length:e},()=>1)]);a.useEffect(()=>{i.current.geometry.attributes.position.needsUpdate=!0}),S(()=>{for(i.current.updateMatrix(),i.current.updateMatrixWorld(),_.copy(i.current.matrixWorld).invert(),i.current.geometry.drawRange.count=Math.min(e,t!==void 0?t:e,s.length),g=0;g<s.length;g++)v=s[g].current,v.getWorldPosition(F).applyMatrix4(_),F.toArray(u,g*3),i.current.geometry.attributes.position.needsUpdate=!0,v.matrixWorldNeedsUpdate=!0,v.color.toArray(c,g*3),i.current.geometry.attributes.color.needsUpdate=!0,m.set([v.size],g),i.current.geometry.attributes.size.needsUpdate=!0});const d=a.useMemo(()=>({getParent:()=>i,subscribe:w=>(l(h=>[...h,w]),()=>l(h=>h.filter(j=>j.current!==w.current)))}),[]);return a.createElement("points",x({userData:{instances:s},matrixAutoUpdate:!1,ref:i,raycast:()=>null},n),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",args:[u,3],usage:y}),a.createElement("bufferAttribute",{attach:"attributes-color",args:[c,3],usage:y}),a.createElement("bufferAttribute",{attach:"attributes-size",args:[m,1],usage:y})),a.createElement(ne.Provider,{value:d},r))}),se=a.forwardRef(({children:r,positions:t,colors:e,sizes:n,stride:o=3,...i},s)=>{const l=a.useRef(null);return a.useImperativeHandle(s,()=>l.current,[]),S(()=>{const u=l.current.geometry.attributes;u.position.needsUpdate=!0,e&&(u.color.needsUpdate=!0),n&&(u.size.needsUpdate=!0)}),a.createElement("points",x({ref:l},i),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",args:[t,o],usage:y}),e&&a.createElement("bufferAttribute",{attach:"attributes-color",args:[e,o],count:e.length/o,usage:y}),n&&a.createElement("bufferAttribute",{attach:"attributes-size",args:[n,1],count:n.length/o,usage:y})),r)}),ie=a.forwardRef((r,t)=>r.positions instanceof Float32Array?a.createElement(se,x({},r,{ref:t})):a.createElement(oe,x({},r,{ref:t})));function D({all:r,scene:t,camera:e}){const n=z(({gl:s})=>s),o=z(({camera:s})=>s),i=z(({scene:s})=>s);return a.useLayoutEffect(()=>{const s=[];r&&(t||i).traverse(c=>{c.visible===!1&&(s.push(c),c.visible=!0)}),n.compile(t||i,e||o);const l=new $(128);new V(.01,1e5,l).update(n,t||i),l.dispose(),s.forEach(c=>c.visible=!1)},[]),null}const U=r=>{const t=a.useRef(null),[e]=a.useState(()=>ee(new Float32Array(5e3),{radius:1.5}));return S((n,o)=>{t.current&&(t.current.rotation.x-=o/10,t.current.rotation.y-=o/15)}),f.jsx("group",{rotation:[0,0,Math.PI/4],children:f.jsx(ie,{ref:t,positions:e,stride:3,frustumCulled:!0,...r,children:f.jsx(ae,{transparent:!0,color:"#ffffff",size:.005,sizeAttenuation:!0,depthWrite:!1})})})},R=["To nie są ćwiczenia, to jest wojna!","Panie admirale, mamy kontakt z wrogiem!","Zgłaszam gotowość do startu, panie kapitanie!","Wszyscy na pokład, lecimy na bombę!","Niech moc będzie z nami, a reszta niech się schowa!","Czas na galaktyczną rozwałkę!","Paliwo? Po co nam paliwo, mamy fantazję!","W kosmosie nikt nie usłyszy twojego krzyku... chyba że jesteś Bombą!","Zawsze chciałem być astronautą, a zostałem kapitanem!","Houston, mamy imprezę!","Nie ma rzeczy niemożliwych, są tylko mało wybuchowe!","Kto nie ryzykuje, ten nie leci na bombę!","Cisza przed burzą, czyli czas na drzemkę.","W galaktyce nie ma przypadków, są tylko niecelne strzały!","Zapasowe majtki to podstawa każdej misji!","Nie pytaj co galaktyka może zrobić dla ciebie, tylko co ty możesz wysadzić dla galaktyki!","Wolę wybuchy od nudy!","Gdyby nie grawitacja, już dawno bym odleciał!","W kosmosie nie ma świateł na skrzyżowaniach, więc gaz do dechy!","Nie ma awarii, są tylko nieplanowane eksplozje!","Moja rakieta, moje zasady!","Kto rano wstaje, ten szybciej leci na bombę!","Nie ufam komputerom, wolę dynamit!","Wszystko jest możliwe, jeśli masz wystarczająco dużo prochu!"],ce=["/models/la_station_spatiale_internationale_iss/scene.gltf","/models/meteor/scene.gltf","/models/satelite/scene.gltf","/models/spaceman/scene.gltf","/models/sputnik_1/scene.gltf"];function ue(r){const[t,e]=a.useState(!1);return a.useEffect(()=>{let n=!0,o=0;return r.forEach(i=>{H.preload(i),fetch(i).then(()=>{o++,o===r.length&&n&&e(!0)}).catch(()=>{o++,o===r.length&&n&&e(!0)})}),()=>{n=!1}},[r]),t}const le=({onFadeOut:r})=>{const[t,e]=a.useState(0),[n]=a.useState(()=>R[Math.floor(Math.random()*R.length)]),[o,i]=a.useState(!1),s=ue(ce),l=5e3,u=90;return a.useEffect(()=>{let c,m=null;function d(w){m===null&&(m=w);const h=w-m;if(h<l){const j=h/l*u;e(j),c=requestAnimationFrame(d)}else e(u)}return c=requestAnimationFrame(d),()=>cancelAnimationFrame(c)},[]),a.useEffect(()=>{let c;if(t>=u&&!s){let m=function(){d+=.5,e(Math.min(100,d)),d<100&&!s&&(c=requestAnimationFrame(m))},d=u;return c=requestAnimationFrame(m),()=>cancelAnimationFrame(c)}},[t,s]),a.useEffect(()=>{if(t>=u&&s){e(100);const c=setTimeout(()=>i(!0),400);return()=>clearTimeout(c)}},[t,s]),a.useEffect(()=>{if(o){const c=setTimeout(()=>r(),500);return()=>clearTimeout(c)}},[o,r]),f.jsxs("div",{className:"star-splash",style:{position:"fixed",inset:0,zIndex:9999,background:"linear-gradient(135deg, #12002b 0%, #000 100%)",display:"flex",alignItems:"center",justifyContent:"center",opacity:o?0:1,transition:"opacity 0.5s",pointerEvents:o?"none":"auto"},children:[f.jsxs(I,{camera:{position:[0,0,1]},style:{position:"absolute",inset:0},children:[f.jsx(U,{}),f.jsx(D,{all:!0})]}),f.jsxs("div",{style:{position:"relative",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[f.jsxs("span",{style:{fontFamily:"Orbitron, monospace",fontSize:"2.5rem",color:"#fff",textShadow:"0 0 16px #4fc3f7, 0 0 32px #1976d2",letterSpacing:"0.1em",marginBottom:"1.2rem",userSelect:"none",minWidth:120,textAlign:"center"},children:[Math.round(t),"%"]}),f.jsx("span",{style:{fontFamily:"Orbitron, monospace",fontSize:"1.1rem",color:"#b3e5fc",textShadow:"0 0 8px #000",marginTop:"0.5rem",textAlign:"center",maxWidth:320},children:n})]})]})},de=({onSplashEnd:r})=>{const[t,e]=a.useState(!0);return a.useEffect(()=>{!t&&r&&r()},[t,r]),t?f.jsx(le,{onFadeOut:()=>e(!1)}):f.jsx("div",{className:"star-background",style:{position:"fixed",inset:0,zIndex:-2},children:f.jsxs(I,{camera:{position:[0,0,1]},children:[f.jsx(a.Suspense,{fallback:null,children:f.jsx(U,{})}),f.jsx(D,{all:!0})]})})};export{de as default};
